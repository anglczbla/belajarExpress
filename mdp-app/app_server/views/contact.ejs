<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <h1>Contact Us</h1>
    <p>ini halaman Contact</p>
    <!-- <ul>
        <li><a href="/home">home</a></li>
        <li><a href="/about">about us</a></li>
        <li><a href="/contact">contact us</a></li>
        <li><a href="/prodi">Prodi</a></li>
    </ul> -->
    <div class="col-lg-6">
        <!-- form sign up -->
        <!-- <h2>membuat akun</h2> -->
        <!-- <p>Signing up for an account is free and easy. Fill out the form below to get started. JavaScript is required to to continue.        -->
        <!-- </p> -->
        <form id="contactForm">
            <div class="mb-3">
                <label for="" class="form-label">Nama</label>
                <input type="text" class="form-control border border-primary"/>
            </div>

            <div class="mb-3">
                <label for="" class="form-label">Email</label>
                <input type="text" class="form-control border border-primary"/>
            </div>

            <div class="mb-3">
                <label for="" class="form-label">Subject</label>
                <input type="text" class="form-control border border-primary"/>
            </div>

            <div class="mb-3">
                <label for="" class="form-label">Message</label>
                <input type="email" class="form-control border border-primary"/>
            </div>

            <!-- <div class="mb-3">
                <label for="" class="form-label">By clicking the "Sign up" button below, I certify that I have read and agree to the TMDB terms of use and privacy policy.</label>
            </div> -->

            <button class="btn btn-primary">Send Message</button>
            <button class="btn btn-default text-primary">Cancel</button>
        </form>
    </div>

<h2>Contact List</h2>
<ul id="contactList"></ul>

<script>
    // simpan data ke localhost ketika tombol sumbmit ditekan 
    document
        .getElementById("contactForm")
        .addEventListener("submit", function (e) {
            e.preventDefault(); // agar form tidak reload halaman setelah submit

            //ambil nilai dari input
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const subject = document.getElementById("subject").value;
            const message = document.getElementById("message").value;

            // ambil daftar kontak lama dari localstorage jika tidak ada data, gunakan aray kosong
            let contacts = JSON.parse(localStorage.getItem("contact")) || [];

            //tambahkan kontak baru ke daftar
            contacts.push({name,email,subject,message});
            
            // simpan kembali daftar kontak ke localstorage
            localStorage.setItem("contacts", JSON.stringify(contacts));

            // kosongkan form setelah submit
            document.getElementById("contactForm").reset();

            //tampilkan daftar kontak yang sudah di updates
            displayContacts();
        });

    // fungsi untuk menampilkan data dari localstorage
    function displayContacts() {
        const contactList = document.getElementById("contactList");
        contactList.innerHTML = ""; // kosongkan list sebelumnya

        // ambil data kontak dari localstorage
        const contact = JSON.parse(localStorage.getItem("contacts")) || [];

        // loop untuk menampilkan setiap kontak
        contacts.forEach((contact) => {
            contactList.innerHTML += `<li>Name: ${contact.name}, Email: ${contact.email}, subject: ${contact.subject}, Message: ${contact.message}</li>`;

        });

    }

    // panggil fungsi untuk menampilkan kontak saat halaman pertama kali dimuat
    window.onload = displayContacts;
</script>


</body>
</html>
